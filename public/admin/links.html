<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Shortlink Admin - Links</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="/admin/admin.css">
</head>
<body>
  <div class="admin-shell">
    <aside class="admin-side">
      <div class="brand">
        <span class="brand-badge">O</span>
        <span>OkLeaf</span>
      </div>
      <div class="side-meta">Admin workspace</div>
      <nav class="side-nav">
        <a href="/admin/dashboard.html">Dashboard</a>
        <a class="active" href="/admin/links.html">Links</a>
        <a href="/admin/domains.html">Domains</a>
        <a href="/admin/analytics.html">Analytics</a>
        <a href="/admin/team.html">Team</a>
        <a href="/admin/api-keys.html">API Keys</a>
        <a href="/admin/site-settings.html">Site</a>
        <a href="/admin/billing.html">Billing</a>
        <a href="/admin/affiliates.html">Affiliates</a>
        <a href="/admin/settings.html">Settings</a>
      </nav>
      <div class="side-footer">
        <button class="btn ghost" id="logoutBtn" type="button">Logout</button>
      </div>
    </aside>

    <div class="admin-main">
      <header class="admin-top">
        <div>
          <h1 class="page-title">Links</h1>
          <p class="page-sub">Create, manage, and share branded links.</p>
        </div>
      </header>

      <main class="admin-content">
        <div class="grid grid-2">
          <section class="card">
            <h3>Create a link</h3>
            <div class="grid">
              <label>
                Destination URL
                <input id="inUrl" class="input" type="url" placeholder="https://example.com/page" autocomplete="off">
              </label>
              <div class="grid grid-2">
                <label>
                  Title (optional)
                  <input id="inTitle" class="input" type="text" placeholder="Campaign name" autocomplete="off">
                </label>
                <label>
                  Custom code (optional)
                  <input id="inCode" class="input" type="text" placeholder="letters, numbers, '-' '_'" autocomplete="off">
                </label>
              </div>
              <label>
                Domain
                <select id="inDomain" class="input"></select>
              </label>
              <div class="muted">Custom domains require a paid plan and verification.</div>
              <div class="muted" id="codePreview">Short URL: https://okleaf.lnk/<span id="codePreviewValue">your-code</span></div>
              <div id="codeStatus" class="status muted">Enter a custom code to check availability.</div>
              <div class="row" style="justify-content:flex-end">
                <button id="btnCreate" class="btn">Create</button>
              </div>
              <div class="muted">Leave code blank to auto-generate.</div>
            </div>
          </section>

          <section class="card">
            <h3>Your links</h3>
            <div class="row" style="gap:8px;margin-bottom:8px">
              <input id="inFilter" class="input" placeholder="Filter by title or code">
              <button id="btnRefresh" class="btn ghost">Refresh</button>
              <button id="btnExport" class="btn ghost">Export CSV</button>
            </div>
            <div class="muted">Click table headers to sort. Copy grabs the short URL.</div>
          </section>
        </div>

        <section class="card" style="margin-top:18px">
          <table id="tbl" aria-label="Links table">
            <thead>
              <tr>
                <th data-sort="title">Title</th>
                <th data-sort="short_code">Code</th>
                <th>Domain</th>
                <th>Short URL</th>
                <th data-sort="click_count">Clicks</th>
                <th data-sort="created_at">Created</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="rows">
              <tr><td class="empty" colspan="7">Loading...</td></tr>
            </tbody>
          </table>
        </section>
      </main>
    </div>
  </div>

  <div class="modal" id="qrModal" aria-hidden="true">
    <div class="modal-backdrop" id="qrBackdrop"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="qrTitle">
      <div class="row" style="justify-content:space-between;align-items:center">
        <div>
          <div class="small muted" id="qrTitle">QR code</div>
        </div>
        <button class="btn ghost" id="qrClose" type="button">Close</button>
      </div>
      <div class="modal-body">
        <img id="qrImage" alt="QR code preview" />
      </div>
      <div class="row" style="justify-content:flex-end">
        <a class="btn ghost" id="qrDownload" download>Download</a>
      </div>
    </div>
  </div>

  <script type="module" src="/admin/links.js"></script>
</body>
</html>
